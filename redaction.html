<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Rédaction - MAKMUS</title>
    <link rel="stylesheet" href="style.css"> <style>
        .article-container { max-width: 800px; margin: 40px auto; padding: 20px; line-height: 1.8; }
        .article-header { border-bottom: 2px solid #000; margin-bottom: 20px; padding-bottom: 20px; text-align: center; }
        .article-header h1 { font-family: 'Playfair Display', serif; font-size: 2.5rem; margin-bottom: 10px; }
        .article-meta { text-transform: uppercase; font-weight: bold; font-size: 0.9rem; color: #666; }
        .article-full-img img { width: 100%; height: auto; margin-bottom: 30px; }
        .article-content { font-size: 1.2rem; font-family: 'Georgia', serif; white-space: pre-wrap; }
        .back-btn { display: inline-block; margin-bottom: 20px; text-decoration: none; color: #000; font-weight: bold; }
    </style>
</head>
<body>
    <div class="article-container">
        <a href="index.html" class="back-btn">← RETOUR À L'ACCUEIL</a>
        <article id="full-article">
            <div id="loader">Chargement de l'article...</div>
        </article>
    </div>

    <script>
        const PB_URL = window.location.origin + "/pb";
        const params = new URLSearchParams(window.location.search);
        const articleId = params.get('id');

        async function loadArticle() {
            if (!articleId) return;
            try {
                const res = await fetch(`${PB_URL}/api/collections/articles/records/${articleId}`);
                const art = await res.json();

                const imgUrl = art.image ? `${PB_URL}/api/files/${art.collectionId}/${art.id}/${art.image}` : '';
                
                document.getElementById('full-article').innerHTML = `
                    <header class="article-header">
                        <div class="article-meta">Publié par la Rédaction MAKMUS — ${new Date(art.created).toLocaleDateString('fr-FR')}</div>
                        <h1>${art.titre}</h1>
                    </header>
                    ${imgUrl ? `<div class="article-full-img"><img src="${imgUrl}"></div>` : ''}
                    <div class="article-content">${art.description}</div>
                `;
                document.title = `${art.titre} - MAKMUS`;
            } catch (e) {
                document.getElementById('full-article').innerHTML = "Erreur lors du chargement de l'article.";
            }
        }
        loadArticle();
    </script>
</body>
</html>
